\subsection{Encoding}
\label{sec:math_encoding}

Some elliptic curve based cryptosystems (such as the adapted ElGamal in Section \ref{sec:math_encryption}) are constructed to encrypt points on a curve. To make
this useful an original string message must be encoded as a point. The encoding must be reversible.

It is trivial to map a message string to the correct numberspace as both strings and numbers have binary representations. The number is then
simply found by converting a string to its binary representation and interpreting this as an integer. Using the ASCII character set the string
\verb+"A"+ is mapped to the number \verb+65+.

\begin{verbatim}
    string_to_binary "A" -> 1000001
    binary_to_integer 1000001 ->  65
\end{verbatim}

Koblitz is attributed with an algorithm that maps a message \(m\), represented as an integer in \(\mathbb{Z}_p\), to a point on the curve of the
simple Weierstrass form \(y^2 = x^3 + ax + b \text{ mod } p\).\cite{MappingAMessage}

An integer K is selected such that \((M + 1)K < p\), and this is used to compute
a candidate x-coordinate for the point, \(x_j = MK + j \text{ mod } p\). To verify the validity of the candidate, a check is performed: \(x_j\)
is a valid x-coordinate for a point on the curve if \(z_j = x_j^3 + ax_j + b\) has a square root. If the candidate is valid, the message \(m\)
can be mapped to a point \(M\) on the curve:

\begin{equation}
	M = (x_j, y_j) \text{, where } y_j = \sqrt{z_j} \text{ mod } p
\end{equation}

If no square root exists for \(z_j\) for all \(j\), \(j = 0 \text{ to } K-1\), then it is not possible to map the message to a point. In other
words, the method is probablistic and it is possible that a message cannot be encoded.\cite{MappingAMessage}

The point can be decoded again by computing \(m = {\lfloor {{x} \over {K}} \rfloor}\).

\textbf{Note: Largest possible K can be found as \(K = \lfloor {{p} \over {m + 1}} \rfloor\).}

\textbf{Note: Performance related to size of K should be discussed here. K is used in multiplication (inefficient for large K!), probability of finding
a mapping depends on K (more likely the larger K). Discuss tradeoff! (See MappingAPoint.)}

As the numberspace the messages must be mapped to is limited by the size of the prime field \(\mathbb{F}_p\) over which the curve is defined, so is the
length of the message. The numeric value of a string can be no greater than \(p\).